<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visuuual w ORKvictor</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow-x: hidden;
    background: #111;
    font-family: 'Inter', sans-serif;
  }

  .section {
    width: 100vw;
    display: flex;
    overflow: hidden;
    position: relative;
    perspective: 1200px;
  }

  /* Section heights */
  #groupB { height: 45vh; }
  #groupC { height: 35vh; }
  #groupA { height: 20vh; }

  .carousel {
    display: flex;
    align-items: center;
    height: 100%;
    transition: transform 0.3s ease;
    cursor: grab;
    user-select: none;
    padding: 0 10vw; /* Allow side images to peek */
  }

  .carousel img {
    flex-shrink: 0;
    height: 80%;
    margin: 0 10px;
    transition: transform 0.3s ease, opacity 0.3s ease;
    border-radius: 8px;
  }

  .center img {
    transform: scale(1.2) rotateY(0deg);
    z-index: 10;
    opacity: 1;
  }

  .carousel img:not(.center) {
    transform: scale(0.8) rotateY(30deg);
    opacity: 0.5;
    z-index: 1;
  }

</style>
</head>
<body>

<!-- Sections -->
<section class="section" id="groupA">
  <div class="carousel">
    <img src="ab.jpg" alt="">
    <img src="st.jpg" alt="">
    <img src="jv.jpg" alt="">
    <img src="albuquerque5.jpg" alt="">
  </div>
</section>

<section class="section" id="groupB">
  <div class="carousel">
    <img src="EEE.png" alt="">
    <img src="BCC.png" alt="">
    <img src="pescheria.png" alt="">
    <img src="BCC.png" alt="">
  </div>
</section>

<section class="section" id="groupC">
  <div class="carousel">
    <img src="sky.png" alt="">
    <img src="neon.png" alt="">
    <img src="" alt="">
    <img src="" alt="">
  </div>
</section>

<script>
  // --- RANDOMIZE SECTION ORDER ---
  const sections = [...document.querySelectorAll('.section')];
  const parent = document.body;
  sections.sort(() => Math.random() - 0.5); // shuffle
  sections.forEach(s => parent.appendChild(s));

  // --- COVER FLOW LOGIC ---
  const carousels = document.querySelectorAll('.carousel');
  carousels.forEach(carousel => {
    let isDown = false, startX, scrollLeft;

    // Set initial random center offset 25% left/right
    const randomOffset = (Math.random() * 0.5 - 0.25) * window.innerWidth;
    carousel.scrollLeft = (carousel.scrollWidth - carousel.clientWidth)/2 + randomOffset;

    const updateCenter = () => {
      const imgs = carousel.querySelectorAll('img');
      let centerIndex = 0, minDistance = Infinity;
      const carouselCenter = carousel.scrollLeft + carousel.clientWidth / 2;
      imgs.forEach((img,i)=>{
        const imgCenter = img.offsetLeft + img.offsetWidth/2;
        const dist = Math.abs(carouselCenter - imgCenter);
        if(dist < minDistance) { minDistance = dist; centerIndex = i; }
        img.classList.remove('center');
      });
      imgs[centerIndex].classList.add('center');
    }

    carousel.addEventListener('mousedown', (e)=>{
      isDown = true;
      startX = e.pageX - carousel.offsetLeft;
      scrollLeft = carousel.scrollLeft;
    });
    carousel.addEventListener('mouseleave',()=>isDown=false);
    carousel.addEventListener('mouseup',()=>isDown=false);
    carousel.addEventListener('mousemove',(e)=>{
      if(!isDown) return;
      e.preventDefault();
      const x = e.pageX - carousel.offsetLeft;
      const walk = (startX - x);
      carousel.scrollLeft = scrollLeft + walk;
      updateCenter();
    });

    carousel.addEventListener('touchstart', (e)=>{
      isDown = true;
      startX = e.touches[0].pageX - carousel.offsetLeft;
      scrollLeft = carousel.scrollLeft;
    });
    carousel.addEventListener('touchend',()=>isDown=false);
    carousel.addEventListener('touchmove',(e)=>{
      if(!isDown) return;
      const x = e.touches[0].pageX - carousel.offsetLeft;
      const walk = (startX - x);
      carousel.scrollLeft = scrollLeft + walk;
      updateCenter();
    });

    updateCenter();
  });
</script>
</body>
</html>
