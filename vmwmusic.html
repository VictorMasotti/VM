<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MusicVIC---TOR</title>
<link rel="icon" type="image/x-icon" href="pinkfav.png">

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  font-family: 'Inter', sans-serif;
  background: 
    /* Base aluminum gradient - front */
    linear-gradient(135deg, #E0E0E0 0%, #B8B8B8 35%, #888888 70%, #505050 100%),
    /* Metallic texture */
    repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(255,255,255,0.03) 2px, rgba(255,255,255,0.03) 4px);
  background-attachment: fixed;
  cursor: url('EARTH2.png'), auto;
  position: relative;
}

/* Rounded cube warping effect - lighter front, darker edges */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background: 
    /* Top edge - curves up and darkens */
    radial-gradient(ellipse 250% 120% at 50% -10%, 
      rgba(180,180,180,0.5) 0%,
      rgba(100,100,100,0.3) 40%,
      transparent 80%),
    /* Bottom edge - curves down and darkens heavily */
    radial-gradient(ellipse 250% 120% at 50% 110%, 
      rgba(30,30,30,0.6) 0%,
      rgba(60,60,60,0.4) 40%,
      transparent 80%),
    /* Left edge - curves left and darkens */
    radial-gradient(ellipse 120% 250% at -10% 50%, 
      rgba(70,70,70,0.5) 0%,
      rgba(40,40,40,0.3) 40%,
      transparent 80%),
    /* Right edge - curves right and darkens */
    radial-gradient(ellipse 120% 250% at 110% 50%, 
      rgba(70,70,70,0.5) 0%,
      rgba(40,40,40,0.3) 40%,
      transparent 80%),
    /* Top-left corner - 10% width LEGO curved slope with bent metal */
    radial-gradient(ellipse 300% 300% at 5% 5%, 
      rgba(200,200,200,0.8) 0%,
      rgba(150,150,150,0.6) 15%,
      rgba(100,100,100,0.5) 30%,
      rgba(60,60,60,0.6) 50%,
      rgba(30,30,30,0.4) 70%,
      transparent 100%),
    /* Top-right corner - 10% width LEGO curved slope with bent metal */
    radial-gradient(ellipse 300% 300% at 95% 5%, 
      rgba(200,200,200,0.8) 0%,
      rgba(150,150,150,0.6) 15%,
      rgba(100,100,100,0.5) 30%,
      rgba(60,60,60,0.6) 50%,
      rgba(30,30,30,0.4) 70%,
      transparent 100%),
    /* Bottom-left corner - 10% width LEGO curved slope darker bent metal */
    radial-gradient(ellipse 300% 300% at 5% 95%, 
      rgba(40,40,40,0.9) 0%,
      rgba(60,60,60,0.8) 15%,
      rgba(80,80,80,0.6) 30%,
      rgba(100,100,100,0.5) 50%,
      rgba(120,120,120,0.3) 70%,
      transparent 100%),
    /* Bottom-right corner - 10% width LEGO curved slope darker bent metal */
    radial-gradient(ellipse 300% 300% at 95% 95%, 
      rgba(40,40,40,0.9) 0%,
      rgba(60,60,60,0.8) 15%,
      rgba(80,80,80,0.6) 30%,
      rgba(100,100,100,0.5) 50%,
      rgba(120,120,120,0.3) 70%,
      transparent 100%);
  pointer-events: none;
  z-index: 0;
}

/* FORCE CUSTOM CURSOR EVERYWHERE */
*, a, a:hover, a:active, a:visited, button, div, .glassButton {
  cursor: url('EARTH2.png'), auto !important;
}

-webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
}

/* Remove blue highlight on touch */
* {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}
.container {
  position: absolute;
  top: 2vh;
  left: 2vw;
  width: calc(100% - 4vw);
  height: calc(100% - 4vh);
  display: flex;
  flex-direction: column;
  gap: 0.4vh;
  border-radius: 2vh;
  /* Curved border shading - makes edges look like they curve away */
  box-shadow: 
    /* Top edge curve */
    inset 0 30px 30px -10px rgba(255,255,255,0.15),
    /* Bottom edge curve */
    inset 0 -30px 30px -10px rgba(0,0,0,0.4),
    /* Left edge curve */
    inset 30px 0 30px -10px rgba(0,0,0,0.2),
    /* Right edge curve */
    inset -30px 0 30px -10px rgba(0,0,0,0.2);
}
.sectionA {
  flex: 0 0 auto;
  max-width: 100%;
  aspect-ratio: 5 / 1;
  display: flex;
  flex-wrap: wrap;
  gap: 0.5vh;
  padding: 0.5vh;
  border-radius: 1.5vh;
  background: linear-gradient(145deg, #3a3f44 0%, #2a2d31 100%);
  position: relative;
  box-shadow: 
    inset 0 1px 0 rgba(255,255,255,0.1),
    inset 0 -1px 0 rgba(0,0,0,0.5),
    0 4px 8px rgba(0,0,0,0.3),
    0 12px 24px rgba(0,0,0,0.5);
}
.sectionA .block1,
.sectionA .block2,
.sectionA .block5 {
  flex: 1 0 calc(20% - 0.5vh);
  aspect-ratio: 1 / 1;
  background: #C9CED4;
  border-radius: 1.5vh;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  box-shadow: 0 4px 8px rgba(0,0,0,0.25),
              inset 0 -2px 6px rgba(0,0,0,0.15);
}
.sectionA .block3_4 {
  flex: 2 0 calc(40% - 0.5vh);
  aspect-ratio: 2 / 1;
  border-radius: 1.5vh;
  background: #111;
  overflow: hidden;
}
.block2 .insetImage {
  position: absolute;
  inset: 10%;
  border-radius: 1.2vh;
  overflow: hidden;
}
.block2 .insetImage img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.sectionB {
  flex: 0 0 auto;
  max-width: 100%;
  aspect-ratio: 5 / 1;
  display: flex;
  flex-wrap: wrap;
  gap: 0.5vh;
  padding: 0.5vh;
  border-radius: 1.5vh;
  background: #2F3035;
  position: relative;
}
.sectionB .block {
  flex: 1 0 calc(10% - 0.5vh);
  aspect-ratio: 1/1;
  background: #C9CED4;
  border-radius: 1.5vh;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  overflow: hidden;
  box-shadow: 0 4px 8px rgba(0,0,0,0.25),
              inset 0 -2px 6px rgba(0,0,0,0.15);
}
.sectionC {
  flex: 1 1 auto;
  min-height: 20%;
}
.sectionB, .sectionC {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5vh;
  padding: 0.5vh;
  border-radius: 1.5vh;
  background: linear-gradient(145deg, #3a3f44 0%, #2a2d31 100%);
  position: relative;
  box-shadow: 
    inset 0 1px 0 rgba(255,255,255,0.1),
    inset 0 -1px 0 rgba(0,0,0,0.5),
    0 4px 8px rgba(0,0,0,0.3),
    0 12px 24px rgba(0,0,0,0.5);
}
.sectionB .block {
  flex: 1 0 calc(10% - 0.5vh);
  aspect-ratio: 1/1;
  background: #C9CED4;
  border-radius: 1.5vh;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  overflow: hidden;
  box-shadow: 0 4px 8px rgba(0,0,0,0.25),
              inset 0 -2px 6px rgba(0,0,0,0.15);
}
.sectionC .block {
  flex: 1 0 calc(10% - 0.5vh);
  width: calc(10% - 0.5vh);
  min-height: 80px; /* Ensure sliders are never too short */
  background: #C9CED4;
  border-radius: 1.5vh;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  overflow: visible;
  box-shadow: 0 4px 8px rgba(0,0,0,0.25),
              inset 0 -2px 6px rgba(0,0,0,0.15);
  padding: 9% 0;
}

.sectionC .sliderTrack {
  position: absolute;
  top: 9%;
  bottom: 9%;
  left: 50%;
  transform: translateX(-50%);
  width: 8px;
  background: linear-gradient(
    180deg,
    rgba(255,255,255,0.4),
    rgba(0,0,0,0.15)
  );
  border-radius: 4px;
  box-shadow: 
    inset 0 2px 4px rgba(0,0,0,0.3),
    inset 0 -2px 4px rgba(255,255,255,0.2);
}

.sectionC .sliderKnob {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 75%;
  aspect-ratio: 1/1;
  border-radius: 50%;
  background: radial-gradient(
    circle at 35% 35%,
    rgba(255,255,255,0.5),
    rgba(255,255,255,0.15) 40%,
    rgba(0,0,0,0.05)
  );
  backdrop-filter: blur(10px);
  box-shadow:
    6px 6px 12px rgba(0,0,0,0.3),
    inset 0 2px 4px rgba(255,255,255,0.5),
    inset 0 -2px 4px rgba(0,0,0,0.2);
  border: 1px solid rgba(255,255,255,0.3);
  cursor: grab;
  touch-action: none;
  z-index: 10;
}

.sectionC .sliderKnob:active {
  cursor: grabbing;
}
.glassButton {
  width: 75%;
  height: auto;
  aspect-ratio: 1/1;
  max-height: 75%;
  border-radius: 50%;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  background: linear-gradient(
    145deg,
    rgba(255,255,255,0.35),
    rgba(255,255,255,0.08)
  );
  backdrop-filter: blur(14px) saturate(130%);
  box-shadow:
    6px 6px 16px rgba(0,0,0,0.35),
    10px 10px 24px rgba(0,0,0,0.25),
    inset 0 -6px 12px rgba(0,0,0,0.35),
    inset 0 3px 6px rgba(255,255,255,0.55),
    inset -3px -3px 8px rgba(0,0,0,0.2),
    inset 3px 3px 8px rgba(255,255,255,0.3);
  will-change: transform;
  border: 1px solid rgba(255,255,255,0.2);
  overflow: hidden;
}

.glassButton::before {
  content: '';
  position: absolute;
  top: 5%;
  left: 5%;
  width: 45%;
  height: 45%;
  background: radial-gradient(
    circle at 35% 35%,
    rgba(255,255,255,0.65) 0%,
    rgba(255,255,255,0.35) 25%,
    rgba(255,255,255,0.12) 50%,
    transparent 75%
  );
  border-radius: 50%;
  filter: blur(3px);
  pointer-events: none;
  clip-path: polygon(0 0, 100% 0, 0 100%);
}
.block5 .glassButton {
  width: 75%;
  height: 75%;
  transition: all 5s ease-in-out;
}
.blockInnerCircle {
  position: absolute;
  width: 55%;
  height: 55%;
  top: 22.5%;
  left: 22.5%;
  border-radius: 50%;
  box-shadow:
    inset 0 2px 4px rgba(255,255,255,0.35),
    inset 0 -3px 6px rgba(0,0,0,0.35);
  pointer-events: none;
}
.secondaryCircle {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: radial-gradient(
    circle at 30% 30%,
    rgba(255,255,255,0.35),
    rgba(0,0,0,0.15)
  );
  box-shadow:
    inset 0 3px 6px rgba(255,255,255,0.25),
    inset 0 -6px 10px rgba(0,0,0,0.45);
  pointer-events: none;
}
.block1 canvas {
  width: 100%;
  height: 100%;
  image-rendering: pixelated;
}
.glassButton img {
  width: 60%; /* reduced by 20% */
  height: 60%;
  object-fit: contain;
  pointer-events: none;
}
</style>
</head>

<body>
<div class="container">

<section class="section sectionA">
  <div class="block block1">
    <canvas id="dotMatrix"></canvas>
  </div>

  <div class="block block2">
    <div class="insetImage">
      <img id="randomImage">
    </div>
  </div>

  <div class="block block3_4">
    <img src="aud.gif" style="width:100%;height:100%;object-fit:cover;border-radius:1.5vh;">
  </div>

  <div class="block block5">
    <div class="glassButton"></div>
  </div>
</section>

<section class="section sectionB" id="sectionB"></section>
<section class="section sectionC" id="sectionC"></section>

</div>

<script>
/* AUDIO */
const audio = new Audio('breakTHROUGH.mp3');
audio.preload = 'auto';
const gif = document.querySelector('.block3_4 img');
gif.addEventListener('load', () => { audio.play().catch(()=>{}); });

let audioUnlocked = false;
document.addEventListener('click', () => {
    if(!audioUnlocked){ audio.play().catch(()=>{}); audioUnlocked = true; }
});

// Web Audio API setup
const audioContext = new (window.AudioContext || window.webkitAudioContext)();
const source = audioContext.createMediaElementSource(audio);

// Create audio nodes
const gainNode = audioContext.createGain(); // Volume
const lowPassFilter = audioContext.createBiquadFilter(); // Filter 1
const highPassFilter = audioContext.createBiquadFilter(); // Filter 2
const bassEQ = audioContext.createBiquadFilter(); // Bass
const trebleEQ = audioContext.createBiquadFilter(); // Treble
const panNode = audioContext.createStereoPanner(); // Pan
const compressor = audioContext.createDynamicsCompressor(); // Compressor
const convolverNode = audioContext.createConvolver(); // Reverb (needs impulse response)

// Configure filters
lowPassFilter.type = 'lowpass';
lowPassFilter.frequency.value = 20000; // Default: no filtering
highPassFilter.type = 'highpass';
highPassFilter.frequency.value = 20; // Default: no filtering
bassEQ.type = 'lowshelf';
bassEQ.frequency.value = 200;
bassEQ.gain.value = 0;
trebleEQ.type = 'highshelf';
trebleEQ.frequency.value = 3000;
trebleEQ.gain.value = 0;
panNode.pan.value = 0; // Center

// Connect audio chain
source.connect(gainNode);
gainNode.connect(lowPassFilter);
lowPassFilter.connect(highPassFilter);
highPassFilter.connect(bassEQ);
bassEQ.connect(trebleEQ);
trebleEQ.connect(panNode);
panNode.connect(compressor);
compressor.connect(audioContext.destination);

// Slider effect mappings
const sliderEffects = [
  { // Slider 1: Pitch Drift / Instability
    name: 'Pitch Drift',
    apply: (value) => {
      // -100 = clean digital, 0 = normal, +100 = unstable tape-like drift
      const drift = (value / 100) * 0.15;
      const wobble = Math.sin(Date.now() / 1000 * (1 + drift * 5)) * drift * 0.5;
      audio.playbackRate = 1 + wobble;
    }
  },
  { // Slider 2: Bass Weight / Sub Density
    name: 'Bass Weight',
    apply: (value) => {
      // -100 = clean digital sine, 0 = normal, +100 = saturated/folded subs
      if (value >= 0) {
        bassEQ.gain.value = (value / 100) * 25;
        bassEQ.type = 'lowshelf';
        bassEQ.frequency.value = 60 + (value / 100) * 40;
      } else {
        bassEQ.gain.value = (value / 100) * 15;
      }
    }
  },
  { // Slider 3: Harmonic Spread
    name: 'Harmonic Spread',
    apply: (value) => {
      // -100 = pure fundamental, 0 = balanced, +100 = rich overtones
      if (value >= 0) {
        trebleEQ.gain.value = (value / 100) * 20;
        trebleEQ.frequency.value = 1000 + (value / 100) * 4000;
      } else {
        trebleEQ.gain.value = (value / 100) * 15;
      }
    }
  },
  { // Slider 4: Time Smear / Micro-delay
    name: 'Time Smear',
    apply: (value) => {
      // -100 = tight transients, 0 = normal, +100 = stretched blur
      // Simulated via playback rate micro-variations
      const smear = (value / 100) * 0.08;
      if (Math.abs(smear) > 0.01) {
        audio.playbackRate = 1 + Math.sin(Date.now() / 500) * smear;
      }
    }
  },
  { // Slider 5: Transient Softener / Punch Shape
    name: 'Transient Softener',
    apply: (value) => {
      // -100 = clicky attacks, 0 = normal, +100 = rounded/rubbery
      if (value >= 0) {
        compressor.attack.value = 0.001 + (value / 100) * 0.02;
        compressor.release.value = 0.1 + (value / 100) * 0.3;
      } else {
        compressor.attack.value = Math.max(0.0001, 0.003 + (value / 100) * 0.001);
      }
    }
  },
  { // Slider 6: Stereo Gravity
    name: 'Stereo Gravity',
    apply: (value) => {
      // -100 = mono center-locked, 0 = normal stereo, +100 = floating wide
      if (value >= 0) {
        panNode.pan.value = (value / 100) * 0.8;
      } else {
        panNode.pan.value = (value / 100) * 0.6;
      }
    }
  },
  { // Slider 7: Texture / Grain Size
    name: 'Texture',
    apply: (value) => {
      // -100 = smooth, 0 = normal, +100 = gritty digital sand
      // Simulated via subtle bitcrushing effect on playback
      if (value > 0) {
        const grainFactor = 1 + (value / 100) * 0.3;
        audio.playbackRate = 1 * grainFactor;
      } else {
        audio.playbackRate = 1;
      }
    }
  },
  { // Slider 8: Filter Motion Depth
    name: 'Filter Motion',
    apply: (value) => {
      // -100 = static filter, 0 = normal, +100 = heavy envelope movement
      if (value >= 0) {
        lowPassFilter.frequency.value = 1000 + (value / 100) * Math.sin(Date.now() / 200) * 3000;
        lowPassFilter.Q.value = 1 + (value / 100) * 5;
      } else {
        lowPassFilter.frequency.value = 20000;
        lowPassFilter.Q.value = 1;
      }
    }
  },
  { // Slider 9: Spectral Tilt
    name: 'Spectral Tilt',
    apply: (value) => {
      // -100 = dark spectrum, 0 = balanced, +100 = bright spectrum
      // Rotate spectrum by adjusting highpass and lowpass together
      if (value >= 0) {
        highPassFilter.frequency.value = 20;
        trebleEQ.gain.value = (value / 100) * 18;
      } else {
        highPassFilter.frequency.value = 200 + Math.abs(value / 100) * 500;
        trebleEQ.gain.value = -Math.abs(value / 100) * 12;
      }
    }
  },
  { // Slider 10: Energy / Excitation Drive
    name: 'Energy',
    apply: (value) => {
      // -100 = quiet/compressed, 0 = normal, +100 = pumping/driven
      if (value >= 0) {
        gainNode.gain.value = 1 + (value / 100) * 0.5;
        compressor.ratio.value = 1 + (value / 100) * 8;
      } else {
        gainNode.gain.value = Math.max(0.3, 1 + (value / 100) * 0.3);
      }
    }
  }
];

/* RANDOM IMAGE */
const imgs = ['corala.png','scattershot.png'];
document.getElementById('randomImage').src =
  imgs[Math.floor(Math.random()*imgs.length)];

/* MATRIX DOTS */
const canvas = document.getElementById('dotMatrix');
const ctx = canvas.getContext('2d');
function resize(){ canvas.width=canvas.offsetWidth; canvas.height=canvas.offsetHeight; }
resize(); window.addEventListener('resize', resize);

const gs=20, dr=4;
let currentBlockColor = '#C9CED4'; // Default, will be updated by color schemes
let audioLevel = 0; // Track audio level for speaker response
let pulsePhase = 0;

// Monitor audio level in real-time
const analyser = audioContext.createAnalyser();
source.connect(analyser);
analyser.connect(audioContext.destination);

function getAudioLevel() {
  const dataArray = new Uint8Array(analyser.frequencyBinCount);
  analyser.getByteFrequencyData(dataArray);
  return dataArray.reduce((a, b) => a + b) / dataArray.length / 255;
}

function hexToRgb(hex) {
  const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  return result ? {
    r: parseInt(result[1], 16),
    g: parseInt(result[2], 16),
    b: parseInt(result[3], 16)
  } : {r: 201, g: 207, b: 212};
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const cx=canvas.width/2, cy=canvas.height/2;
  const r=Math.min(canvas.width,canvas.height)/2*0.85;
  
  // Get current audio level for dynamic response
  audioLevel = getAudioLevel();
  pulsePhase += 0.12;
  
  // NO BACKGROUND - only draw dots on transparent canvas
  
  // Draw dots on transparent surface
  const s=(2*r)/(gs-1);
  const dotRadius = Math.max(1.8, Math.min(5.5, s * 0.16));
  
  for(let y=0;y<gs;y++)for(let x=0;x<gs;x++){
    const baseX=cx-r+x*s, baseY=cy-r+y*s;
    const distFromCenter = Math.hypot(baseX-cx, baseY-cy);
    
    if(distFromCenter <= r){
      const rnd=Math.random()*99;
      let col='#000';
      if(rnd<2) col='#ff8000';
      else if(rnd<2.6) col='#ffb343';
      else if(rnd<3) col='#40bcf4';
      
      // Static dots, no warping
      ctx.beginPath();
      ctx.arc(baseX, baseY, dotRadius, 0, Math.PI*2);
      ctx.fillStyle = col;
      ctx.fill();
    }
  }
}
setInterval(draw,35); draw();

/* BUTTON CREATION */
function createBlocks(section,num,addHomeIcon=false){
  for(let i=0;i<num;i++){
    const block=document.createElement('div');
    block.className='block';
    const btn=document.createElement('div');
    btn.className='glassButton';

    // Click ripple effect
    btn.addEventListener('click',()=>{      
      const s=document.createElement('div');
      s.className='secondaryCircle';
      btn.appendChild(s);
      s.animate(
        [{transform:'scale(1)',opacity:1},{transform:'scale(0.82)',opacity:0}],
        {duration:900,easing:'cubic-bezier(0.25,1,0.5,1)'}
      );
      setTimeout(()=>s.remove(),900);

      const nova=document.createElement('div');
      nova.style.position='absolute';
      nova.style.top='50%';
      nova.style.left='50%';
      nova.style.width='100%';
      nova.style.height='100%';
      nova.style.transform='translate(-50%,-50%)';
      nova.style.borderRadius='50%';
      nova.style.background='rgba(180,180,180,0.5)';
      nova.style.filter='blur(4px)';
      nova.style.pointerEvents='none';
      btn.appendChild(nova);
      nova.animate(
        [{transform:'translate(-50%,-50%) scale(1)',opacity:1},
         {transform:'translate(-50%,-50%) scale(1.4)',opacity:0}],
        {duration:1100,easing:'ease-out'}
      );
      setTimeout(()=>nova.remove(),1100);
    });

    // Home icon for first block
    if(addHomeIcon && i===0){
      const link = document.createElement('a');
      link.href = 'https://victormasotti.com/';
      link.style.display = 'flex';
      link.style.justifyContent = 'center';
      link.style.alignItems = 'center';
      link.style.width = '100%';
      link.style.height = '100%';

      const homeIcon = document.createElement('img');
      homeIcon.src = 'home.png';
      homeIcon.style.width = '60%'; // reduced size
      homeIcon.style.height = '60%';
      homeIcon.style.objectFit = 'contain';
      homeIcon.style.pointerEvents = 'none';

      link.appendChild(homeIcon);
      btn.appendChild(link);
    }

    block.appendChild(btn);
    section.appendChild(block);
  }
}

const sectionB=document.getElementById('sectionB');
const sectionC=document.getElementById('sectionC');
createBlocks(sectionB,20,true);
createBlocks(sectionC,10);

/* Add paint.png icon to button 10 */
const button10Icon = sectionB.children[9].querySelector('.glassButton');
if (button10Icon) {
  const paintIcon = document.createElement('img');
  paintIcon.src = 'paint.png';
  paintIcon.style.width = '60%';
  paintIcon.style.height = '60%';
  paintIcon.style.objectFit = 'contain';
  paintIcon.style.pointerEvents = 'none';
  button10Icon.appendChild(paintIcon);
}

/* Create sliders for Section C */
[...sectionC.children].forEach((block, index) => {
  // Remove glass button if exists
  const existingBtn = block.querySelector('.glassButton');
  if (existingBtn) existingBtn.remove();
  
  // Create slider track
  const track = document.createElement('div');
  track.className = 'sliderTrack';
  block.appendChild(track);
  
  // Create slider knob
  const knob = document.createElement('div');
  knob.className = 'sliderKnob';
  block.appendChild(knob);
  
  // Add slider image icon TO THE KNOB (so it follows it)
  const sliderImg = document.createElement('img');
  sliderImg.src = `slider${index + 1}.png`;
  sliderImg.style.width = '60%';
  sliderImg.style.height = '60%';
  sliderImg.style.objectFit = 'contain';
  sliderImg.style.pointerEvents = 'none';
  knob.appendChild(sliderImg);
  
  // Slider state
  let isDragging = false;
  let sliderValue = 0; // -100 to +100, default 0 (middle = no effect)
  
  function updateKnobPosition(value) {
    const blockHeight = block.offsetHeight;
    const knobHeight = knob.offsetHeight;
    const borderSpace = blockHeight * 0.09;
    
    // Position knob: -100 at bottom, 0 at middle, +100 at top
    const minPos = borderSpace;
    const maxPos = blockHeight - borderSpace - knobHeight;
    const middlePos = (minPos + maxPos) / 2;
    const range = (maxPos - minPos) / 2;
    const position = middlePos - (value / 100) * range;
    
    knob.style.top = `${position}px`;
    knob.style.left = '50%';
    knob.style.transform = 'translateX(-50%)';
  }
  
  function triggerKnobEffect() {
    // Secondary circle ripple - EXACT copy from section B
    const s=document.createElement('div');
    s.className='secondaryCircle';
    knob.appendChild(s);
    s.animate(
      [{transform:'scale(1)',opacity:1},{transform:'scale(0.82)',opacity:0}],
      {duration:900,easing:'cubic-bezier(0.25,1,0.5,1)'}
    );
    setTimeout(()=>s.remove(),900);

    // Nova burst - EXACT copy from section B
    const nova=document.createElement('div');
    nova.style.position='absolute';
    nova.style.top='50%';
    nova.style.left='50%';
    nova.style.width='100%';
    nova.style.height='100%';
    nova.style.transform='translate(-50%,-50%)';
    nova.style.borderRadius='50%';
    nova.style.background='rgba(180,180,180,0.5)';
    nova.style.filter='blur(4px)';
    nova.style.pointerEvents='none';
    knob.appendChild(nova);
    nova.animate(
      [{transform:'translate(-50%,-50%) scale(1)',opacity:1},
       {transform:'translate(-50%,-50%) scale(1.4)',opacity:0}],
      {duration:1100,easing:'ease-out'}
    );
    setTimeout(()=>nova.remove(),1100);
  }
  
  function handleMove(clientY) {
    if (!isDragging) return;
    
    const rect = block.getBoundingClientRect();
    const blockHeight = rect.height;
    const knobHeight = knob.offsetHeight;
    const borderSpace = blockHeight * 0.09;
    
    const minY = rect.top + borderSpace;
    const maxY = rect.bottom - borderSpace - knobHeight;
    const middleY = (minY + maxY) / 2;
    const range = (maxY - minY) / 2;
    
    // Calculate slider value: top = +100, middle = 0, bottom = -100
    const relativeY = clientY - middleY;
    const clampedY = Math.max(-range, Math.min(range, relativeY));
    sliderValue = Math.round(-(clampedY / range) * 100);
    
    updateKnobPosition(sliderValue);
    
    // Apply audio effect
    if (sliderEffects[index]) {
      sliderEffects[index].apply(sliderValue);
    }
  }
  
  // Mouse events
  knob.addEventListener('mousedown', (e) => {
    isDragging = true;
    triggerKnobEffect();
    e.preventDefault();
  });
  
  // Use window for global tracking
  window.addEventListener('mousemove', (e) => {
    if (isDragging) {
      e.preventDefault();
      handleMove(e.clientY);
    }
  });
  
  window.addEventListener('mouseup', () => {
    isDragging = false;
  });
  
  // Touch events
  knob.addEventListener('touchstart', (e) => {
    isDragging = true;
    triggerKnobEffect();
    e.preventDefault();
  }, {passive: false});
  
  document.addEventListener('touchmove', (e) => {
    if (isDragging && e.touches[0]) {
      handleMove(e.touches[0].clientY);
    }
  }, {passive: false});
  
  document.addEventListener('touchend', () => {
    isDragging = false;
  });
  
  // Initialize position
  updateKnobPosition(sliderValue);
  
  // Update position on window resize
  window.addEventListener('resize', () => {
    updateKnobPosition(sliderValue);
  });
});

/* Add info button to Section B at position 3 (4th button) */
const button4 = sectionB.children[3];
if (button4) {
  const btn4 = button4.querySelector('.glassButton');
  
  // Add info icon
  const infoIcon = document.createElement('img');
  infoIcon.src = 'leaflet.png';
  infoIcon.style.width = '60%';
  infoIcon.style.height = '60%';
  infoIcon.style.objectFit = 'contain';
  infoIcon.style.pointerEvents = 'none';
  btn4.appendChild(infoIcon);
  
  // Info button click handler
  btn4.addEventListener('click', (e) => {
    e.stopPropagation();
    
    // Create alert container (creamy yellow style - no sidebar)
    const alertBox = document.createElement('div');
    alertBox.style.position = 'fixed';
    alertBox.style.top = '5vh';
    alertBox.style.left = '50%';
    alertBox.style.transform = 'translateX(-50%)';
    alertBox.style.right = 'auto';
    alertBox.style.bottom = '5vh';
    
    // Always 60% of screen width, but cap at 60vw max
    alertBox.style.width = '60vw';
    alertBox.style.maxWidth = '60vw';
    
    alertBox.style.background = 'linear-gradient(135deg, #FFFEF5 0%, #FFFFF0 100%)';
    alertBox.style.borderRadius = '4vh';
    alertBox.style.padding = '4vh';
    alertBox.style.boxShadow = '0 20px 60px rgba(0,0,0,0.2)';
    alertBox.style.zIndex = '10000';
    alertBox.style.overflow = 'hidden';
    alertBox.style.display = 'flex';
    alertBox.style.flexDirection = 'column';
    alertBox.style.fontFamily = 'Inter, sans-serif';
    alertBox.style.animation = 'fadeInScale 0.3125s cubic-bezier(0.34, 1.56, 0.64, 1)';
    alertBox.style.border = '1px solid rgba(255, 255, 200, 0.6)';
    
    const scrollbarStyle = document.createElement('style');
    scrollbarStyle.textContent = `
      @keyframes fadeInScale {
        from {
          opacity: 0;
          transform: translateX(-50%) scale(0.85);
        }
        to {
          opacity: 1;
          transform: translateX(-50%) scale(1);
        }
      }
      @keyframes fadeOutZoom {
        from {
          opacity: 1;
          transform: translateX(-50%) scale(1);
        }
        to {
          opacity: 0;
          transform: translateX(-50%) scale(1.05);
        }
      }
    `;
    document.head.appendChild(scrollbarStyle);
    
    // Content wrapper for scrolling - NO VISIBLE SCROLLBAR AT ALL
    const contentWrapper = document.createElement('div');
    contentWrapper.className = 'alert-content';
    contentWrapper.style.display = 'flex';
    contentWrapper.style.flexDirection = 'column';
    contentWrapper.style.height = '100%';
    contentWrapper.style.overflowY = 'auto';
    contentWrapper.style.overflowX = 'hidden';
    contentWrapper.style.scrollBehavior = 'smooth';
    contentWrapper.style.msOverflowStyle = 'none'; /* IE and Edge */
    contentWrapper.style.scrollbarWidth = 'none'; /* Firefox */
    
    // Absolutely hide scrollbar for all browsers
    const hideScrollbar = document.createElement('style');
    hideScrollbar.textContent = `
      .alert-content::-webkit-scrollbar {
        width: 0;
        height: 0;
      }
      .alert-content::-webkit-scrollbar-track {
        background: none;
      }
      .alert-content::-webkit-scrollbar-thumb {
        background: none;
      }
    `;
    document.head.appendChild(hideScrollbar);
    
    // Title - two lines
    const title = document.createElement('h2');
    title.innerHTML = 'Victor WLE<br>(Web Listening Experience)';
    title.style.margin = '0 0 0.5vh 0';
    title.style.fontSize = '2.8vh';
    title.style.fontWeight = '800';
    title.style.color = '#8B7D5F';
    title.style.textShadow = '0 2px 4px rgba(0,0,0,0.1)';
    title.style.fontFamily = "'Inter', sans-serif";
    title.style.textAlign = 'center';
    title.style.lineHeight = '1.3';
    contentWrapper.appendChild(title);
    
    // Separator line
    const sep1 = document.createElement('div');
    sep1.style.width = '100%';
    sep1.style.height = '1px';
    sep1.style.background = 'repeating-linear-gradient(90deg, #8B7D5F 0px, #8B7D5F 4px, transparent 4px, transparent 8px)';
    sep1.style.margin = '0.8vh 0';
    contentWrapper.appendChild(sep1);
    
    // Subtitle
    const subtitle = document.createElement('p');
    subtitle.textContent = 'Instructions leaflet on how to experiment with Victor\'s music catalog on this experimental web listening format';
    subtitle.style.margin = '0.8vh 0 1.2vh 0';
    subtitle.style.fontSize = '1.5vh';
    subtitle.style.color = '#9B8D7F';
    subtitle.style.fontWeight = '500';
    subtitle.style.fontFamily = "'Inter', sans-serif";
    subtitle.style.textAlign = 'center';
    contentWrapper.appendChild(subtitle);
    
    // Info content
    const content = document.createElement('div');
    content.style.fontSize = '1.7vh';
    content.style.lineHeight = '2.6vh';
    content.style.color = '#6B5F4F';
    content.style.marginBottom = '3vh';
    content.style.flex = '1';
    content.style.overflowY = 'auto';
    content.style.fontFamily = "'Inter', sans-serif";
    content.innerHTML = `
      <div style="margin: 1.2vh 0; border-bottom: 1px dashed #8B7D5F; padding-bottom: 1vh;">
        <p style="margin: 0; font-family: 'Inter', sans-serif;"><strong style="color: #8B7D5F;">1. How to use:</strong></p>
      </div>
      <ul style="margin: 0.8vh 0 1.2vh 0; padding-left: 2.5vh; list-style-type: none; font-family: 'Inter', sans-serif;">
        <li style="margin: 0.6vh 0;"><strong>Section A:</strong> Live audio visualization with dynamic 3D speaker cone mesh</li>
        <li style="margin: 0.6vh 0;"><strong>Section B:</strong> Control buttons - Volume, Info, and infinite color schemes</li>
        <li style="margin: 0.6vh 0;"><strong>Section C:</strong> 10 professional audio sliders for real-time processing</li>
      </ul>
      
      <div style="margin: 1.2vh 0; border-bottom: 1px dashed #8B7D5F; padding-bottom: 1vh;">
        <p style="margin: 0; font-family: 'Inter', sans-serif;"><strong style="color: #8B7D5F;">2. Slider Functions:</strong></p>
      </div>
      <ul style="margin: 0.8vh 0 1.2vh 0; padding-left: 2.5vh; list-style-type: none; font-family: 'Inter', sans-serif;">
        <li style="margin: 0.5vh 0; font-size: 1.6vh;"><strong>1. Pitch Drift</strong> â€” Analog wobble control</li>
        <li style="margin: 0.5vh 0; font-size: 1.6vh;"><strong>2. Bass Weight</strong> â€” Sub density shaping</li>
        <li style="margin: 0.5vh 0; font-size: 1.6vh;"><strong>3. Harmonic Spread</strong> â€” Overtone richness</li>
        <li style="margin: 0.5vh 0; font-size: 1.6vh;"><strong>4. Time Smear</strong> â€” Transient blurring</li>
        <li style="margin: 0.5vh 0; font-size: 1.6vh;"><strong>5. Transient Softener</strong> â€” Attack envelope</li>
        <li style="margin: 0.5vh 0; font-size: 1.6vh;"><strong>6. Stereo Gravity</strong> â€” Spatial positioning</li>
        <li style="margin: 0.5vh 0; font-size: 1.6vh;"><strong>7. Texture</strong> â€” Grain and grit control</li>
        <li style="margin: 0.5vh 0; font-size: 1.6vh;"><strong>8. Filter Motion</strong> â€” Dynamic filtering</li>
        <li style="margin: 0.5vh 0; font-size: 1.6vh;"><strong>9. Spectral Tilt</strong> â€” Brightness rotation</li>
        <li style="margin: 0.5vh 0; font-size: 1.6vh;"><strong>10. Energy</strong> â€” Drive and compression</li>
      </ul>
      
      <div style="margin: 1.2vh 0; border-bottom: 1px dashed #8B7D5F; padding-bottom: 1vh;">
        <p style="margin: 0; font-family: 'Inter', sans-serif;"><strong style="color: #8B7D5F;">3. WLE Default Colour Scheme:</strong></p>
      </div>
      <p style="font-family: 'Inter', sans-serif; margin: 0.8vh 0; font-size: 1.6vh;">Press the paint button (ðŸŽ¨) to cycle through infinite color variations. Every 5 presses returns to WLE Default.</p>
    `;
    contentWrapper.appendChild(content);
    alertBox.appendChild(contentWrapper);
    
    // Close on outside click
    const overlay = document.createElement('div');
    overlay.style.position = 'fixed';
    overlay.style.inset = '0';
    overlay.style.background = 'rgba(0,0,0,0.4)';
    overlay.style.zIndex = '9999';
    overlay.style.backdropFilter = 'blur(4px)';
    overlay.style.transition = 'all 0.4s ease-out';
    
    function closeAlert() {
      alertBox.style.animation = 'fadeOutZoom 1.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards';
      overlay.style.transition = 'all 1.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
      overlay.style.backdropFilter = 'blur(0px)';
      overlay.style.background = 'rgba(0,0,0,0)';
      setTimeout(() => {
        alertBox.remove();
        overlay.remove();
        scrollbarStyle.remove();
        hideScrollbar.remove();
      }, 1400);
    }
    
    overlay.addEventListener('click', closeAlert);
    
    document.body.appendChild(overlay);
    document.body.appendChild(alertBox);
    
    // Trigger button effect
    const s=document.createElement('div');
    s.className='secondaryCircle';
    btn4.appendChild(s);
    s.animate(
      [{transform:'scale(1)',opacity:1},{transform:'scale(0.82)',opacity:0}],
      {duration:900,easing:'cubic-bezier(0.25,1,0.5,1)'}
    );
    setTimeout(()=>s.remove(),900);

    const nova=document.createElement('div');
    nova.style.position='absolute';
    nova.style.top='50%';
    nova.style.left='50%';
    nova.style.width='100%';
    nova.style.height='100%';
    nova.style.transform='translate(-50%,-50%)';
    nova.style.borderRadius='50%';
    nova.style.background='rgba(180,180,180,0.5)';
    nova.style.filter='blur(4px)';
    nova.style.pointerEvents='none';
    btn4.appendChild(nova);
    nova.animate(
      [{transform:'translate(-50%,-50%) scale(1)',opacity:1},
       {transform:'translate(-50%,-50%) scale(1.4)',opacity:0}],
      {duration:1100,easing:'ease-out'}
    );
    setTimeout(()=>nova.remove(),1100);
  });
}
const button2 = sectionB.children[1]; // Second button (index 1)
const button3 = sectionB.children[2]; // Third button (index 2)

// Add less.png icon to button 2
const btn2 = button2.querySelector('.glassButton');
const lessIcon = document.createElement('img');
lessIcon.src = 'less.png';
lessIcon.style.width = '60%';
lessIcon.style.height = '60%';
lessIcon.style.objectFit = 'contain';
lessIcon.style.pointerEvents = 'none';
btn2.appendChild(lessIcon);

// Add more.png icon to button 3
const btn3 = button3.querySelector('.glassButton');
const moreIcon = document.createElement('img');
moreIcon.src = 'more.png';
moreIcon.style.width = '60%';
moreIcon.style.height = '60%';
moreIcon.style.objectFit = 'contain';
moreIcon.style.pointerEvents = 'none';
btn3.appendChild(moreIcon);

// Button 2: Lower volume by 5% with light beige shade
button2.querySelector('.glassButton').addEventListener('click', (e) => {
  audio.volume = Math.max(0, audio.volume - 0.05);
  console.log('Volume decreased to:', Math.round(audio.volume * 100) + '%');
  
  e.stopPropagation();
  
  const btn = button2.querySelector('.glassButton');
  
  // Light beige tinted secondary circle
  const s = document.createElement('div');
  s.className = 'secondaryCircle';
  s.style.background = 'radial-gradient(circle at 30% 30%, rgba(215, 207, 189, 0.35), rgba(0, 0, 0, 0.15))';
  btn.appendChild(s);
  s.animate(
    [{transform:'scale(1)',opacity:1},{transform:'scale(0.82)',opacity:0}],
    {duration:900,easing:'cubic-bezier(0.25,1,0.5,1)'}
  );
  setTimeout(()=>s.remove(),900);

  // Light beige nova
  const nova = document.createElement('div');
  nova.style.position = 'absolute';
  nova.style.top = '50%';
  nova.style.left = '50%';
  nova.style.width = '100%';
  nova.style.height = '100%';
  nova.style.transform = 'translate(-50%,-50%)';
  nova.style.borderRadius = '50%';
  nova.style.background = 'rgba(215, 207, 189, 0.4)';
  nova.style.filter = 'blur(6px)';
  nova.style.pointerEvents = 'none';
  btn.appendChild(nova);
  nova.animate(
    [{transform:'translate(-50%,-50%) scale(1)',opacity:1},
     {transform:'translate(-50%,-50%) scale(1.4)',opacity:0}],
    {duration:1100,easing:'ease-out'}
  );
  setTimeout(()=>nova.remove(),1100);
});

// Button 3: Raise volume by 5% with light beige shade
button3.querySelector('.glassButton').addEventListener('click', (e) => {
  audio.volume = Math.min(1, audio.volume + 0.05);
  console.log('Volume increased to:', Math.round(audio.volume * 100) + '%');
  
  e.stopPropagation();
  
  const btn = button3.querySelector('.glassButton');
  
  // Light beige tinted secondary circle
  const s = document.createElement('div');
  s.className = 'secondaryCircle';
  s.style.background = 'radial-gradient(circle at 30% 30%, rgba(215, 207, 189, 0.35), rgba(0, 0, 0, 0.15))';
  btn.appendChild(s);
  s.animate(
    [{transform:'scale(1)',opacity:1},{transform:'scale(0.82)',opacity:0}],
    {duration:900,easing:'cubic-bezier(0.25,1,0.5,1)'}
  );
  setTimeout(()=>s.remove(),900);

  // Light beige nova
  const nova = document.createElement('div');
  nova.style.position = 'absolute';
  nova.style.top = '50%';
  nova.style.left = '50%';
  nova.style.width = '100%';
  nova.style.height = '100%';
  nova.style.transform = 'translate(-50%,-50%)';
  nova.style.borderRadius = '50%';
  nova.style.background = 'rgba(215, 207, 189, 0.4)';
  nova.style.filter = 'blur(6px)';
  nova.style.pointerEvents = 'none';
  btn.appendChild(nova);
  nova.animate(
    [{transform:'translate(-50%,-50%) scale(1)',opacity:1},
     {transform:'translate(-50%,-50%) scale(1.4)',opacity:0}],
    {duration:1100,easing:'ease-out'}
  );
  setTimeout(()=>nova.remove(),1100);
});

/* 4-color inner circles */
const colors=['#ff8000','#00e054','#ffb343','#40bcf4'];
[...sectionB.children].slice(4,8).forEach((block,i)=>{
  const c=document.createElement('div');
  c.className='blockInnerCircle';
  c.style.background=colors[i];
  block.querySelector('.glassButton').appendChild(c);
});

// Block5 - NO static inner circles, color changes via scheme only

/* Block5 random time */
document.querySelector('.block5 .glassButton').addEventListener('click', (e) => {
    const maxTime = 85;
    const randomTime = Math.random() * maxTime;
    audio.currentTime = randomTime;
    audio.play().catch(()=>{});
    
    e.stopPropagation();
    
    const btn = document.querySelector('.block5 .glassButton');
    
    // Secondary circle ripple
    const s = document.createElement('div');
    s.className = 'secondaryCircle';
    s.style.background = 'radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.25), rgba(0, 0, 0, 0.15))';
    btn.appendChild(s);
    s.animate(
      [{transform:'scale(1)',opacity:1},{transform:'scale(0.82)',opacity:0}],
      {duration:900,easing:'ease-out'}
    ).onfinish=()=>s.remove();
    
    // Nova burst
    const n = document.createElement('div');
    n.className = 'secondaryCircle';
    n.style.background = 'radial-gradient(circle, rgba(255,255,255,0.5) 0%, transparent 70%)';
    btn.appendChild(n);
    n.animate(
      [{transform:'scale(1)',opacity:0.8},{transform:'scale(1.4)',opacity:0}],
      {duration:1100,easing:'ease-out'}
    ).onfinish=()=>n.remove();
});

/* Button 10 - Color Scheme Cycler */
let currentMode = 0;
let pressCount = 0; // Counter for returning to basis every 5 presses
const button10 = sectionB.children[9];

// Basis scheme always stays at position 0
const basisScheme = {
  name: 'Basis Mode',
  sectionABlocks: '#C9CED4',
  sectionBCBlocks: '#C9CED4',
  bodyBg: '#C9CED4',
  greenCircle: '#801818',
  showText: false
};

// All other schemes shuffled randomly
let colorSchemes = [
  {
    name: 'Scheme 1',
    sectionABlocks: '#188f65',
    sectionBCBlocks: '#d7cfbd',
    bodyBg: '#d7cfbd',
    greenCircle: '#188f65',
    showText: true,
    textColor: '#188f65'
  },
  {
    name: 'Scheme 2',
    sectionABlocks: '#eba02d',
    sectionBCBlocks: '#A8B88F',
    bodyBg: '#A8B88F',
    greenCircle: '#eba02d',
    showText: true,
    textColor: '#eba02d'
  },
  {
    name: 'Scheme 3',
    sectionABlocks: '#0000FF',
    sectionBCBlocks: '#FFFFFF',
    bodyBg: '#FFFFFF',
    greenCircle: '#0000FF',
    showText: true,
    textColor: '#0000FF'
  },
  {
    name: 'Scheme 4',
    sectionABlocks: '#ffb16e',
    sectionBCBlocks: '#fff5b8',
    bodyBg: '#fff5b8',
    greenCircle: '#ffb16e',
    showText: true,
    textColor: '#ffb16e'
  },
  {
    name: 'Scheme 5',
    sectionABlocks: '#FEE715',
    sectionBCBlocks: '#101820',
    bodyBg: '#101820',
    greenCircle: '#FEE715',
    showText: true,
    textColor: '#FEE715'
  },
  {
    name: 'Scheme 6',
    sectionABlocks: '#F9E795',
    sectionBCBlocks: '#F96167',
    bodyBg: '#F96167',
    greenCircle: '#F9E795',
    showText: true,
    textColor: '#F9E795'
  }
].sort(() => Math.random() - 0.5);

colorSchemes = [basisScheme, ...colorSchemes];

// Random schemes pool (harmonious combos) - NOW SHUFFLED & INFINITE
const randomSchemes = [
  { sectionABlocks: '#FF6B6B', sectionBCBlocks: '#FFE66D', bodyBg: '#FFE66D', greenCircle: '#FF6B6B', textColor: '#FF6B6B' },
  { sectionABlocks: '#4ECDC4', sectionBCBlocks: '#C7F0DB', bodyBg: '#C7F0DB', greenCircle: '#4ECDC4', textColor: '#4ECDC4' },
  { sectionABlocks: '#A8DADC', sectionBCBlocks: '#F1FAEE', bodyBg: '#F1FAEE', greenCircle: '#A8DADC', textColor: '#A8DADC' },
  { sectionABlocks: '#FFB4A2', sectionBCBlocks: '#FFCDB2', bodyBg: '#FFCDB2', greenCircle: '#FFB4A2', textColor: '#FFB4A2' },
  { sectionABlocks: '#06FFA5', sectionBCBlocks: '#FFFFC7', bodyBg: '#FFFFC7', greenCircle: '#06FFA5', textColor: '#06FFA5' },
  { sectionABlocks: '#E63946', sectionBCBlocks: '#F8B195', bodyBg: '#F8B195', greenCircle: '#E63946', textColor: '#E63946' },
  { sectionABlocks: '#84A9C0', sectionBCBlocks: '#EAE7DC', bodyBg: '#EAE7DC', greenCircle: '#84A9C0', textColor: '#84A9C0' },
  { sectionABlocks: '#FF99C8', sectionBCBlocks: '#FCF6BD', bodyBg: '#FCF6BD', greenCircle: '#FF99C8', textColor: '#FF99C8' },
  { sectionABlocks: '#188f65', sectionBCBlocks: '#d7cfbd', bodyBg: '#d7cfbd', greenCircle: '#188f65', textColor: '#188f65' },
  { sectionABlocks: '#eba02d', sectionBCBlocks: '#A8B88F', bodyBg: '#A8B88F', greenCircle: '#eba02d', textColor: '#eba02d' },
  { sectionABlocks: '#0000FF', sectionBCBlocks: '#FFFFFF', bodyBg: '#FFFFFF', greenCircle: '#0000FF', textColor: '#0000FF' },
  { sectionABlocks: '#ffb16e', sectionBCBlocks: '#fff5b8', bodyBg: '#fff5b8', greenCircle: '#ffb16e', textColor: '#ffb16e' },
  { sectionABlocks: '#FEE715', sectionBCBlocks: '#101820', bodyBg: '#101820', greenCircle: '#FEE715', textColor: '#FEE715' },
  { sectionABlocks: '#F9E795', sectionBCBlocks: '#F96167', bodyBg: '#F96167', greenCircle: '#F9E795', textColor: '#F9E795' },
  { sectionABlocks: '#FF6B9D', sectionBCBlocks: '#FEC8D8', bodyBg: '#FEC8D8', greenCircle: '#FF6B9D', textColor: '#FF6B9D' },
  { sectionABlocks: '#645995', sectionBCBlocks: '#D5BEE7', bodyBg: '#D5BEE7', greenCircle: '#645995', textColor: '#645995' },
  { sectionABlocks: '#F38181', sectionBCBlocks: '#FFEAA7', bodyBg: '#FFEAA7', greenCircle: '#F38181', textColor: '#F38181' },
  { sectionABlocks: '#AA96DA', sectionBCBlocks: '#FCBAD3', bodyBg: '#FCBAD3', greenCircle: '#AA96DA', textColor: '#AA96DA' },
  { sectionABlocks: '#95E1D3', sectionBCBlocks: '#F38181', bodyBg: '#F38181', greenCircle: '#95E1D3', textColor: '#95E1D3' },
  { sectionABlocks: '#A8E6CF', sectionBCBlocks: '#FFD3B6', bodyBg: '#FFD3B6', greenCircle: '#A8E6CF', textColor: '#A8E6CF' },
  { sectionABlocks: '#FF8B94', sectionBCBlocks: '#FFB4A2', bodyBg: '#FFB4A2', greenCircle: '#FF8B94', textColor: '#FF8B94' },
  { sectionABlocks: '#E8DFF5', sectionBCBlocks: '#DEEAE6', bodyBg: '#DEEAE6', greenCircle: '#E8DFF5', textColor: '#E8DFF5' },
  { sectionABlocks: '#6BCB77', sectionBCBlocks: '#4D96FF', bodyBg: '#4D96FF', greenCircle: '#6BCB77', textColor: '#6BCB77' },
  { sectionABlocks: '#FF6348', sectionBCBlocks: '#FFD700', bodyBg: '#FFD700', greenCircle: '#FF6348', textColor: '#FF6348' },
  { sectionABlocks: '#2E86AB', sectionBCBlocks: '#A23B72', bodyBg: '#A23B72', greenCircle: '#2E86AB', textColor: '#2E86AB' },
  { sectionABlocks: '#F18F01', sectionBCBlocks: '#C73E1D', bodyBg: '#C73E1D', greenCircle: '#F18F01', textColor: '#F18F01' },
  { sectionABlocks: '#6A994E', sectionBCBlocks: '#BC4749', bodyBg: '#BC4749', greenCircle: '#6A994E', textColor: '#6A994E' },
  { sectionABlocks: '#386641', sectionBCBlocks: '#6A994E', bodyBg: '#6A994E', greenCircle: '#386641', textColor: '#386641' },
  { sectionABlocks: '#2D6A4F', sectionBCBlocks: '#52B788', bodyBg: '#52B788', greenCircle: '#2D6A4F', textColor: '#2D6A4F' },
  { sectionABlocks: '#FF0000', sectionBCBlocks: '#FFFF00', bodyBg: '#FFFF00', greenCircle: '#FF0000', textColor: '#FF0000' },
  { sectionABlocks: '#00FF00', sectionBCBlocks: '#FF00FF', bodyBg: '#FF00FF', greenCircle: '#00FF00', textColor: '#00FF00' },
  { sectionABlocks: '#0080FF', sectionBCBlocks: '#FFB700', bodyBg: '#FFB700', greenCircle: '#0080FF', textColor: '#0080FF' },
  { sectionABlocks: '#FF1493', sectionBCBlocks: '#00CED1', bodyBg: '#00CED1', greenCircle: '#FF1493', textColor: '#FF1493' },
  { sectionABlocks: '#FF69B4', sectionBCBlocks: '#FFD700', bodyBg: '#FFD700', greenCircle: '#FF69B4', textColor: '#FF69B4' },
  { sectionABlocks: '#20B2AA', sectionBCBlocks: '#FFB6C1', bodyBg: '#FFB6C1', greenCircle: '#20B2AA', textColor: '#20B2AA' },
  { sectionABlocks: '#DC143C', sectionBCBlocks: '#FFD700', bodyBg: '#FFD700', greenCircle: '#DC143C', textColor: '#DC143C' },
  { sectionABlocks: '#7FFFD4', sectionBCBlocks: '#FF4500', bodyBg: '#FF4500', greenCircle: '#7FFFD4', textColor: '#7FFFD4' },
  { sectionABlocks: '#8B008B', sectionBCBlocks: '#00FA9A', bodyBg: '#00FA9A', greenCircle: '#8B008B', textColor: '#8B008B' },
  { sectionABlocks: '#FF00FF', sectionBCBlocks: '#00FFFF', bodyBg: '#00FFFF', greenCircle: '#FF00FF', textColor: '#FF00FF' },
  { sectionABlocks: '#FF8C00', sectionBCBlocks: '#32CD32', bodyBg: '#32CD32', greenCircle: '#FF8C00', textColor: '#FF8C00' },
  { sectionABlocks: '#1E90FF', sectionBCBlocks: '#FFD700', bodyBg: '#FFD700', greenCircle: '#1E90FF', textColor: '#1E90FF' }
].sort(() => Math.random() - 0.5);

let isFlipped = false;

button10.querySelector('.glassButton').addEventListener('click', () => {
  pressCount++;
  
  // Return to basis every 5 presses
  if (pressCount % 5 === 0) {
    const basisScheme = {
      name: 'Basis',
      sectionABlocks: '#C9CED4',
      sectionBCBlocks: '#C9CED4',
      bodyBg: '#C9CED4',
      greenCircle: '#801818',
      showText: false,
      textColor: '#C9CED4'
    };
    applyScheme(basisScheme);
  } else {
    // Always pick random from infinite pool
    const randomIndex = Math.floor(Math.random() * randomSchemes.length);
    const randomScheme = { ...randomSchemes[randomIndex], showText: false };
    applyScheme(randomScheme);
  }
});

function applyScheme(scheme) {
  
  // Get all elements
  const greyBlocks = document.querySelectorAll('.sectionB .block, .sectionC .block, .block1, .block2, .block5');
  const sectionAGreyBlocks = document.querySelectorAll('.block1, .block2, .block5');
  const greenCircle = document.querySelector('.block5 .blockInnerCircle:nth-child(4)');
  const block5Button = document.querySelector('.block5 .glassButton');
  const allButtons = document.querySelectorAll('.glassButton');
  
  // Show mode text if enabled - DISABLED, no text
  // NO MORE FLIP ANIMATION - just color scheme changes
  
  // Apply Section A blocks color - fade gradually
  const targetColor = scheme.sectionABlocks;
  const startColor = currentBlockColor;
  const startTime = Date.now();
  const fadeDuration = 6000; // 6 seconds to match block transition
  
  const colorFadeInterval = setInterval(() => {
    const elapsed = Date.now() - startTime;
    const progress = Math.min(elapsed / fadeDuration, 1);
    
    // Interpolate between start and target color
    const startRgb = hexToRgb(startColor);
    const targetRgb = hexToRgb(targetColor);
    
    const r = Math.round(startRgb.r + (targetRgb.r - startRgb.r) * progress);
    const g = Math.round(startRgb.g + (targetRgb.g - startRgb.g) * progress);
    const b = Math.round(startRgb.b + (targetRgb.b - startRgb.b) * progress);
    
    currentBlockColor = `#${((r << 16) | (g << 8) | b).toString(16).padStart(6, '0')}`;
    
    if (progress >= 1) {
      clearInterval(colorFadeInterval);
      currentBlockColor = targetColor;
    }
  }, 16); // ~60fps
  
  sectionAGreyBlocks.forEach(block => {
    block.style.transition = `background-color 6s ease-in-out`;
    block.style.backgroundColor = scheme.sectionABlocks;
  });
  
  // Make block5 button background stay glass
  if (block5Button) {
    block5Button.style.transition = `background 6s ease-in-out`;
    // Keep the glass effect, don't change the background
    block5Button.style.background = `linear-gradient(
      145deg,
      rgba(255,255,255,0.35),
      rgba(255,255,255,0.08)
    )`;
  }
  
  // Apply Section B & C blocks color
  const sectionBBlocks = document.querySelectorAll('.sectionB .block');
  const sectionCBlocks = document.querySelectorAll('.sectionC .block');
  const allBCBlocks = [...sectionBBlocks, ...sectionCBlocks];
  
  allBCBlocks.forEach(block => {
    block.style.transition = `background-color 5s ease-in-out`;
    block.style.backgroundColor = scheme.sectionBCBlocks;
  });
  
  // Apply body background
  document.body.style.transition = `background-color 5s ease-in-out`;
  document.body.style.backgroundColor = scheme.bodyBg;
}

/* Cursor follow - independent blocks */
document.addEventListener('mousemove',e=>{
  [...sectionB.children,...sectionC.children,document.querySelector('.block5')]
  .forEach(block=>{
    const btn=block.querySelector('.glassButton');
    if(!btn) return;
    const r=block.getBoundingClientRect();
    const dx=e.clientX-(r.left+r.width/2);
    const dy=e.clientY-(r.top+r.height/2);
    const dist=Math.hypot(dx,dy);
    const strength=Math.max(0,1-dist/80)*2; // Reduced from 275 to 80 - much less attraction
    btn.style.transform=
      `translate(${dx*0.25*strength}px,${dy*0.25*strength}px)
       scale(${1+strength*0.05})`;
  });
});
</script>
</body>
</html>
